# 8. 多重リスト

要素にリストを持つリストを **多重リスト** と言います．

多重リストの例として `[[0, 1], [2, 3]]` があります．

今回は二重リストの扱い方の解説をします．

## [ 1 ] 二重リストの要素の取得と変更

二重リストの要素は `リスト[インデックス1][インデックス2]` で取得します．

また `リスト[インデックス1][インデックス2] = 値` で要素を変更します．

#### コード 1

``` py
L = [[0, 1], [2, 3]]
print(L[0])     # [0, 1]
print(L[1])     # [2, 3]
print(L[0][0])  # 0
print(L[0][1])  # 1
print(L[1][0])  # 2
print(L[1][1])  # 3

L[0][0] = 100
L[1][0] = -1
print(L)        # [[100, 1], [-1, 3]]
```

## [ 2 ] 二重リストの初期化

通常のリストの初期化は `[x] * N` のように書くことができます ([リストの繰り返し](./07.md#リストの繰り返し))．

ただし二重リストの初期化は注意が必要です．

コード 2 の 1 行目のように書くと一見良さそうに見えますが、5 行目における要素の更新が上手くできません．

`L[0][0]` を更新すると、`L[1][0], L[2][0]` も同じように更新されてしまいます．

理由は `L[0], L[1], L[2]` がすべて同じオブジェクトであるためです．

例えば `L1 = [100, 100, 100]` の場合、`L1[0], L1[1], L1[2]` はどちらも同じ `100` ですが、三つ子のように別人の関係になっています．

そのため、`L1[0] = 200` と変更しても、`L1[1], L2[2]` は影響を受けることなく `100` のままです．

しかし `L2 = [[0, 0], [0, 0], [0, 0]]` の場合、`L2[0], L2[1], L2[2]` は同一人物であり、三つ子のような関係にはなっていません．

そのため、`L2[0][0] = 1` と変更すると、`L1[1][0], L2[2][0]` も影響を受けるため `1` に変化します．

#### コード 2

``` py
L = [[0] * 2] * 3
print(L)  # [[0, 0], [0, 0], [0, 0]]

# L[0][0] を更新すると、L[1][0], L[2][0] も更新されてしまう．
L[0][0] = 1
print(L)  # [[1, 0], [1, 0], [1, 0]]
```

この問題はコード 3 のようにリスト内包表記を使用して初期化すれば解決します．

このようにすると `L[0], L[1], L[2]` はそれぞれ別のオブジェクトになります．

#### コード 3

``` py
L = [[0] * 2 for i in range(3)]
print(L)  # [[0, 0], [0, 0], [0, 0]]

# L[0][0] を更新する．
L[0][0] = 1
print(L)  # [[1, 0], [0, 0], [0, 0]]
```

## [ 3 ] 二重リストの入力

要素が長さ `M` のリストを `N` 個もつ 二重リストの入力が次のように与えられるとします．

``` in
N M
A[1][1] A[1][2] ... A[1][M]
A[2][1] A[2][2] ... A[2][M]
...
A[N][1] A[N][2] ... A[N][M]
```

コード 4 のように、リスト内包表記を使って入力を受け取ります．

#### コード 4

``` py
N, M = map(int, input().split())

# 要素が整数 (int) の場合
A = [list(map(int, input().split())) for i in range(N)]

# 要素が実数 (float) の場合
A = [list(map(float, input().split())) for i in range(N)]

# 要素が文字列 (str) の場合
A = [input().split() for i in range(N)]
```

### 練習問題

#### 問題 8-1 : [ベクトルと行列の積](https://onlinejudge.u-aizu.ac.jp/courses/lesson/2/ITP1/6/ITP1_6_D)

<br>
<details><summary>問題 8-1 の解答</summary><div>

``` py
n, m = map(int, input().split())
a = [list(map(int, input().split())) for i in range(n)]
b = [int(input()) for i in range(m)]

c = [0] * n
for i in range(n):
    for j in range(m):
        c[i] += a[i][j] * b[j]
    print(c[i])
```

</div></details>

#### 問題 8-2 : [行列の積](https://onlinejudge.u-aizu.ac.jp/courses/lesson/2/ITP1/7/ITP1_7_D)

<br>
<details><summary>問題 8-2 の解答</summary><div>

``` py
n, m, l = map(int, input().split())
a = [list(map(int, input().split())) for i in range(n)]
b = [list(map(int, input().split())) for i in range(m)]

c = [[0] * l for i in range(n)]
for i in range(n):
    for j in range(l):
        for k in range(m):
            c[i][j] += a[i][k] * b[k][j]
    print(*c[i])
```

</div></details>
